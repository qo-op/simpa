{"version":3,"file":"simpa.js","mappings":"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","sources":["../../../webpack/universalModuleDefinition","../../../webpack/bootstrap","../../../webpack/runtime/make namespace object","simpa.ts","index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Simpa\"] = factory();\n\telse\n\t\troot[\"Simpa\"] = factory();\n})(this, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * Dialog\r\n *\r\n * Based on the javax.swing.JDialog\r\n * https://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html\r\n * https://docs.oracle.com/javase/8/docs/api/javax/swing/JDialog.html\r\n *\r\n * @author Yassuo Toda\r\n */\r\n\r\nexport class Dialog {\r\n  static dragStart: boolean = false;\r\n\r\n  static dialog: HTMLElement;\r\n  static x: number;\r\n  static y: number;\r\n  static width: number;\r\n  static height: number;\r\n\r\n  static pointerdown = (ev: PointerEvent) => {\r\n    let dialogTitleBar: HTMLElement;\r\n    const target = ev.target as HTMLElement;\r\n    if (target.classList.contains(\"DialogTitleBar\")) {\r\n      dialogTitleBar = target;\r\n    } else {\r\n      dialogTitleBar = target.closest(\".DialogTitleBar\") as HTMLElement;\r\n      if (dialogTitleBar === null) {\r\n        return;\r\n      }\r\n    }\r\n    Dialog.dragStart = true;\r\n    Dialog.dialog = dialogTitleBar.closest(\".Dialog\") as HTMLElement;\r\n    var rect = Dialog.dialog.getBoundingClientRect();\r\n    Dialog.x = ev.clientX - rect.left;\r\n    Dialog.y = ev.clientY - rect.top;\r\n    Dialog.width = rect.width;\r\n    Dialog.height = rect.height;\r\n    Dialog.dialog.style.position = \"absolute\";\r\n    Dialog.dialog.style.top = rect.top + \"px\";\r\n    Dialog.dialog.style.left = rect.left + \"px\";\r\n    document.addEventListener(\"touchmove\", Dialog.preventTouchMove, {\r\n      passive: false,\r\n    });\r\n    document.addEventListener(\"pointermove\", Dialog.pointermove);\r\n    document.addEventListener(\"pointerup\", Dialog.pointerup);\r\n    document.addEventListener(\"pointerenter\", Dialog.pointerenter);\r\n  };\r\n\r\n  static preventTouchMove(ev: TouchEvent) {\r\n    ev.preventDefault();\r\n  }\r\n\r\n  static pointermove = (ev: PointerEvent) => {\r\n    if (!Dialog.dragStart) {\r\n      return;\r\n    }\r\n    Dialog.dialog.style.top =\r\n      Math.min(\r\n        Math.max(ev.clientY - Dialog.y, 0),\r\n        window.innerHeight - Dialog.height\r\n      ) + \"px\";\r\n    Dialog.dialog.style.left =\r\n      Math.min(\r\n        Math.max(ev.clientX - Dialog.x, 0),\r\n        window.innerWidth - Dialog.width\r\n      ) + \"px\";\r\n  };\r\n\r\n  static pointerup = (ev: PointerEvent) => {\r\n    Dialog.dragStart = false;\r\n    document.removeEventListener(\"touchmove\", Dialog.preventTouchMove);\r\n    document.removeEventListener(\"pointermove\", Dialog.pointermove);\r\n    document.removeEventListener(\"pointerup\", Dialog.pointerup);\r\n    document.removeEventListener(\"pointerenter\", Dialog.pointerenter);\r\n  };\r\n\r\n  static pointerenter = (ev: PointerEvent) => {\r\n    Dialog.pointerup(ev);\r\n  };\r\n}\r\n\r\n/**\r\n * MenuBar\r\n *\r\n * Based on the javax.swing.JMenu\r\n * https://docs.oracle.com/javase/tutorial/uiswing/components/menu.html\r\n * https://docs.oracle.com/javase/8/docs/api/javax/swing/JMenuBar.html\r\n *\r\n * @author Yassuo Toda\r\n */\r\n\r\nexport class MenuBar {\r\n  static open = (menuBar: HTMLElement) => {\r\n    menuBar.dataset.open = \"\";\r\n  };\r\n\r\n  static close = (menuBar: HTMLElement) => {\r\n    menuBar.dataset.closed = \"\";\r\n    menuBar.removeAttribute(\"data-open\");\r\n    MenuBar.select(menuBar, menuBar, null);\r\n  };\r\n\r\n  static select = (\r\n    menuBar: HTMLElement,\r\n    ul: HTMLElement,\r\n    li: HTMLElement | null\r\n  ) => {\r\n    MenuBar.clearTimeout(menuBar);\r\n    if (ul === menuBar) {\r\n      if (li !== null && li.dataset.selected !== undefined) {\r\n        return;\r\n      }\r\n      menuBar\r\n        .querySelectorAll(\":scope li[data-selected]\")\r\n        .forEach((selected: Element) => {\r\n          selected.removeAttribute(\"data-selected\");\r\n        });\r\n      if (li !== null) {\r\n        li.dataset.selected = \"\";\r\n      }\r\n    } else {\r\n      if (li === null) {\r\n        MenuBar.setTimeout(\r\n          menuBar,\r\n          () => {\r\n            for (let i: number = 0; i < ul.children.length; i++) {\r\n              ul.children[i].removeAttribute(\"data-selected\");\r\n            }\r\n          },\r\n          250\r\n        );\r\n      } else {\r\n        MenuBar.setTimeout(\r\n          menuBar,\r\n          () => {\r\n            for (let i: number = 0; i < ul.children.length; i++) {\r\n              const child = ul.children[i] as HTMLElement;\r\n              if (child === li) {\r\n                child.dataset.selected = \"\";\r\n              } else {\r\n                child.removeAttribute(\"data-selected\");\r\n              }\r\n            }\r\n          },\r\n          250\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  static getSelected(menuBar: HTMLElement): HTMLElement | null {\r\n    for (let i: number = 0; i < menuBar.children.length; i++) {\r\n      const li: HTMLElement = <HTMLElement>menuBar.children[i];\r\n      if (li.dataset.selected !== undefined) {\r\n        return li;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  static clearTimeout = (menuBar: HTMLElement) => {\r\n    if (menuBar.dataset.timeoutId !== undefined) {\r\n      clearTimeout(+menuBar.dataset.timeoutId);\r\n    }\r\n  };\r\n\r\n  static setTimeout = (\r\n    menuBar: HTMLElement,\r\n    handler: TimerHandler,\r\n    timeout: number\r\n  ) => {\r\n    menuBar.dataset.timeoutId = \"\" + setTimeout(handler, timeout);\r\n  };\r\n\r\n  static pointerdown = (ev: PointerEvent) => {\r\n    const currentTarget = ev.currentTarget;\r\n    const target = ev.target as HTMLElement;\r\n    let menuBar: HTMLElement;\r\n    if (currentTarget === document) {\r\n      menuBar = target.closest(\".MenuBar\") as HTMLElement;\r\n      if (!menuBar) {\r\n        document.querySelectorAll(\".MenuBar\").forEach((menuBar: Element) => {\r\n          MenuBar.close(menuBar as HTMLElement);\r\n        });\r\n        return;\r\n      }\r\n      if (!menuBar.onpointerdown) {\r\n        menuBar.onpointerdown = MenuBar.pointerdown;\r\n      }\r\n      if (!menuBar.onpointerup) {\r\n        menuBar.onpointerup = MenuBar.pointerup;\r\n      }\r\n      if (ev.pointerType === \"mouse\") {\r\n        if (!menuBar.onmouseover) {\r\n          menuBar.onmouseover = MenuBar.mouseover;\r\n        }\r\n        if (!menuBar.onmouseleave) {\r\n          menuBar.onmouseleave = MenuBar.mouseleave;\r\n        }\r\n      }\r\n    } else {\r\n      menuBar = currentTarget as HTMLElement;\r\n    }\r\n    try {\r\n      const li = target.closest(\"li\");\r\n      if (li === null) {\r\n        return;\r\n      }\r\n      const ul = li.parentElement;\r\n      if (ul === null) {\r\n        return;\r\n      }\r\n      const selected = MenuBar.getSelected(menuBar);\r\n      if (selected === li) {\r\n        if (menuBar.dataset.open === undefined) {\r\n          menuBar.dataset.closed = \"\";\r\n          MenuBar.open(menuBar);\r\n        }\r\n      } else {\r\n        MenuBar.select(menuBar, ul, li);\r\n        menuBar.dataset.closed = \"\";\r\n        if (menuBar.dataset.open === undefined) {\r\n          MenuBar.open(menuBar);\r\n        }\r\n      }\r\n    } finally {\r\n      ev.stopPropagation();\r\n    }\r\n  };\r\n\r\n  static pointerup = (ev: PointerEvent) => {\r\n    const target = ev.target as HTMLElement;\r\n    const li = target.closest(\"li\");\r\n    if (li === null) {\r\n      return;\r\n    }\r\n    const input: HTMLInputElement | null = li.querySelector(\r\n      \":scope>input, :scope>:not(ul) input\"\r\n    );\r\n    if (input !== null) {\r\n      if (input.type === \"radio\") {\r\n        if (!input.checked) {\r\n          input.checked = true;\r\n        }\r\n      } else if (input.type === \"checkbox\") {\r\n        input.checked = !input.checked;\r\n      }\r\n    }\r\n    const menuBar = ev.currentTarget as HTMLElement;\r\n    if (li.parentElement === menuBar) {\r\n      // menu\r\n      if (menuBar.dataset.closed !== undefined) {\r\n        menuBar.removeAttribute(\"data-closed\");\r\n      } else {\r\n        MenuBar.close(menuBar);\r\n      }\r\n      return;\r\n    }\r\n    const ul: HTMLElement | null = li.querySelector(\":scope>ul\");\r\n    if (ul !== null) {\r\n      // submenu\r\n      return;\r\n    }\r\n    const hr: HTMLElement | null = li.querySelector(\":scope>hr\");\r\n    if (hr !== null) {\r\n      return;\r\n    }\r\n    MenuBar.close(menuBar);\r\n  };\r\n\r\n  static mouseover = (ev: MouseEvent) => {\r\n    const menuBar = ev.currentTarget as HTMLElement;\r\n    if (menuBar.dataset.open === undefined) {\r\n      return;\r\n    }\r\n    const target = ev.target as HTMLElement;\r\n    const li = target.closest(\"li\");\r\n    if (li === null) {\r\n      return;\r\n    }\r\n    const ul: HTMLElement | null = li.parentElement;\r\n    if (ul === null) {\r\n      return;\r\n    }\r\n    MenuBar.select(menuBar, ul, li);\r\n  };\r\n\r\n  static mouseleave = (ev: MouseEvent) => {\r\n    const menuBar = ev.currentTarget as HTMLElement;\r\n    MenuBar.clearTimeout(menuBar);\r\n    menuBar\r\n      .querySelectorAll(\":scope li[data-selected]\")\r\n      .forEach((selected: Element) => {\r\n        const ul: HTMLElement | null = selected.querySelector(\":scope>ul\");\r\n        if (ul === null) {\r\n          selected.removeAttribute(\"data-selected\");\r\n        }\r\n      });\r\n  };\r\n}\r\n\r\n/**\r\n * OptionPane\r\n *\r\n * Based on the javax.swing.JOptionPane\r\n * https://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html\r\n * https://docs.oracle.com/javase/8/docs/api/javax/swing/JOptionPane.html\r\n *\r\n * @author Yassuo Toda\r\n */\r\n\r\nexport class OptionPane {\r\n  static showMessageDialog = (\r\n    message: string = \"\",\r\n    title: string = \"Message\",\r\n    messageType: string = \"information\",\r\n    icon?: string\r\n  ) => {\r\n    if (icon) {\r\n      return new Promise((resolve, reject) => {\r\n        const img = document.createElement(\"img\");\r\n        img.alt = \"Custom icon\";\r\n        img.onload = function () {\r\n          img.style.width = img.naturalWidth + \"px\";\r\n          img.style.height = img.naturalHeight + \"px\";\r\n          let modalLayer = document.body.querySelector(\r\n            \":scope>.ModalLayer\"\r\n          ) as HTMLElement;\r\n          if (modalLayer === null) {\r\n            modalLayer = document.createElement(\"div\");\r\n            modalLayer.classList.add(\"ModalLayer\");\r\n            modalLayer.classList.add(\"CenterLayout\");\r\n            modalLayer.style.visibility = \"inherit\";\r\n            document.body.appendChild(modalLayer);\r\n          }\r\n          const optionPane = new OptionPane(\r\n            resolve,\r\n            reject,\r\n            null,\r\n            message,\r\n            title,\r\n            \"default\",\r\n            messageType,\r\n            img\r\n          );\r\n          modalLayer.appendChild(optionPane.dialog);\r\n          modalLayer.style.visibility = \"inherit\";\r\n          optionPane.dialogOkButton?.focus();\r\n        };\r\n        img.onerror = function () {\r\n          reject(new Error(`Failed to load image '${icon}'`));\r\n        };\r\n        img.src = icon;\r\n      });\r\n    } else {\r\n      return new Promise((resolve, reject) => {\r\n        let modalLayer = document.body.querySelector(\r\n          \":scope>.ModalLayer\"\r\n        ) as HTMLElement;\r\n        if (modalLayer === null) {\r\n          modalLayer = document.createElement(\"div\");\r\n          modalLayer.classList.add(\"ModalLayer\");\r\n          modalLayer.classList.add(\"CenterLayout\");\r\n          modalLayer.style.visibility = \"inherit\";\r\n          document.body.appendChild(modalLayer);\r\n        }\r\n        const optionPane = new OptionPane(\r\n          resolve,\r\n          reject,\r\n          null,\r\n          message,\r\n          title,\r\n          \"default\",\r\n          messageType\r\n        );\r\n        modalLayer.appendChild(optionPane.dialog);\r\n        modalLayer.style.visibility = \"inherit\";\r\n        optionPane.dialogOkButton?.focus();\r\n      });\r\n    }\r\n  };\r\n\r\n  static showConfirmDialog = (\r\n    message: string = \"\",\r\n    title: string = \"Message\",\r\n    optionType: string = \"yes-no-cancel\",\r\n    messageType?: string,\r\n    icon?: string\r\n  ) => {\r\n    if (icon) {\r\n      return new Promise((resolve, reject) => {\r\n        const img = document.createElement(\"img\");\r\n        img.alt = \"Custom icon\";\r\n        img.onload = function () {\r\n          img.style.width = img.naturalWidth + \"px\";\r\n          img.style.height = img.naturalHeight + \"px\";\r\n          let modalLayer = document.body.querySelector(\r\n            \":scope>.ModalLayer\"\r\n          ) as HTMLElement;\r\n          if (modalLayer === null) {\r\n            modalLayer = document.createElement(\"div\");\r\n            modalLayer.classList.add(\"ModalLayer\");\r\n            modalLayer.classList.add(\"CenterLayout\");\r\n            modalLayer.style.visibility = \"inherit\";\r\n            document.body.appendChild(modalLayer);\r\n          }\r\n          const optionPane = new OptionPane(\r\n            resolve,\r\n            reject,\r\n            null,\r\n            message,\r\n            title,\r\n            optionType,\r\n            messageType ||\r\n              (optionType !== \"default\" ? \"question\" : \"information\"),\r\n            img\r\n          );\r\n          modalLayer.appendChild(optionPane.dialog);\r\n          modalLayer.style.visibility = \"inherit\";\r\n          if (optionPane.dialogOkButton) {\r\n            optionPane.dialogOkButton.focus();\r\n          } else {\r\n            optionPane.dialogYesButton?.focus();\r\n          }\r\n        };\r\n        img.onerror = function () {\r\n          reject(new Error(`Failed to load image '${icon}'`));\r\n        };\r\n        img.src = icon;\r\n      });\r\n    } else {\r\n      return new Promise((resolve, reject) => {\r\n        let modalLayer = document.body.querySelector(\r\n          \":scope>.ModalLayer\"\r\n        ) as HTMLElement;\r\n        if (modalLayer === null) {\r\n          modalLayer = document.createElement(\"div\");\r\n          modalLayer.classList.add(\"ModalLayer\");\r\n          modalLayer.classList.add(\"CenterLayout\");\r\n          modalLayer.style.visibility = \"inherit\";\r\n          document.body.appendChild(modalLayer);\r\n        }\r\n        const optionPane = new OptionPane(\r\n          resolve,\r\n          reject,\r\n          null,\r\n          message,\r\n          title,\r\n          optionType,\r\n          messageType || (optionType !== \"default\" ? \"question\" : \"information\")\r\n        );\r\n        modalLayer.appendChild(optionPane.dialog);\r\n        modalLayer.style.visibility = \"inherit\";\r\n        if (optionPane.dialogOkButton) {\r\n          optionPane.dialogOkButton.focus();\r\n        } else {\r\n          optionPane.dialogYesButton?.focus();\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  static showInputDialog = (\r\n    message: string = \"\",\r\n    title: string = \"Message\",\r\n    messageType: string = \"question\",\r\n    icon?: string,\r\n    selectionValues?: string[],\r\n    initialSelectionValue?: string\r\n  ) => {\r\n    let input: HTMLElement;\r\n    if (selectionValues) {\r\n      const comboBox = document.createElement(\"select\") as HTMLSelectElement;\r\n      selectionValues.forEach((selectionValue: string) => {\r\n        const option = document.createElement(\"option\");\r\n        option.value = selectionValue;\r\n        option.text = selectionValue;\r\n        comboBox.appendChild(option);\r\n      });\r\n      if (initialSelectionValue) {\r\n        comboBox.value = initialSelectionValue;\r\n      }\r\n      input = comboBox;\r\n    } else {\r\n      const textField = document.createElement(\"input\") as HTMLInputElement;\r\n      textField.type = \"text\";\r\n      if (initialSelectionValue) {\r\n        textField.value = initialSelectionValue;\r\n      }\r\n      input = textField;\r\n    }\r\n    if (icon) {\r\n      return new Promise((resolve, reject) => {\r\n        const img = document.createElement(\"img\");\r\n        img.alt = \"Custom icon\";\r\n        img.onload = function () {\r\n          img.style.width = img.naturalWidth + \"px\";\r\n          img.style.height = img.naturalHeight + \"px\";\r\n          let modalLayer = document.body.querySelector(\r\n            \":scope>.ModalLayer\"\r\n          ) as HTMLElement;\r\n          if (modalLayer === null) {\r\n            modalLayer = document.createElement(\"div\");\r\n            modalLayer.classList.add(\"ModalLayer\");\r\n            modalLayer.classList.add(\"CenterLayout\");\r\n            modalLayer.style.visibility = \"inherit\";\r\n            document.body.appendChild(modalLayer);\r\n          }\r\n          const optionPane = new OptionPane(\r\n            resolve,\r\n            reject,\r\n            input,\r\n            message,\r\n            title,\r\n            \"ok-cancel\",\r\n            messageType,\r\n            img\r\n          );\r\n          modalLayer.appendChild(optionPane.dialog);\r\n          modalLayer.style.visibility = \"inherit\";\r\n          input.focus();\r\n        };\r\n        img.onerror = function () {\r\n          reject(new Error(`Failed to load image '${icon}'`));\r\n        };\r\n        img.src = icon;\r\n      });\r\n    } else {\r\n      return new Promise((resolve, reject) => {\r\n        let modalLayer = document.body.querySelector(\r\n          \":scope>.ModalLayer\"\r\n        ) as HTMLElement;\r\n        if (modalLayer === null) {\r\n          modalLayer = document.createElement(\"div\");\r\n          modalLayer.classList.add(\"ModalLayer\");\r\n          modalLayer.classList.add(\"CenterLayout\");\r\n          modalLayer.style.visibility = \"inherit\";\r\n          document.body.appendChild(modalLayer);\r\n        }\r\n        const optionPane = new OptionPane(\r\n          resolve,\r\n          reject,\r\n          input,\r\n          message,\r\n          title,\r\n          \"ok-cancel\",\r\n          messageType\r\n        );\r\n        modalLayer.appendChild(optionPane.dialog);\r\n        modalLayer.style.visibility = \"inherit\";\r\n        input.focus();\r\n      });\r\n    }\r\n  };\r\n\r\n  static showOptionDialog = (\r\n    message: string = \"\",\r\n    title: string = \"Message\",\r\n    optionType: string = \"yes-no-cancel\",\r\n    messageType: string,\r\n    icon: string,\r\n    options: string[],\r\n    initialValue: string\r\n  ) => {\r\n    if (icon) {\r\n      return new Promise((resolve, reject) => {\r\n        const img = document.createElement(\"img\");\r\n        img.alt = \"Custom icon\";\r\n        img.onload = function () {\r\n          img.style.width = img.naturalWidth + \"px\";\r\n          img.style.height = img.naturalHeight + \"px\";\r\n          let modalLayer = document.body.querySelector(\r\n            \":scope>.ModalLayer\"\r\n          ) as HTMLElement;\r\n          if (modalLayer === null) {\r\n            modalLayer = document.createElement(\"div\");\r\n            modalLayer.classList.add(\"ModalLayer\");\r\n            modalLayer.classList.add(\"CenterLayout\");\r\n            modalLayer.style.visibility = \"inherit\";\r\n            document.body.appendChild(modalLayer);\r\n          }\r\n          const optionPane = new OptionPane(\r\n            resolve,\r\n            reject,\r\n            null,\r\n            message,\r\n            title,\r\n            optionType,\r\n            messageType ||\r\n              (optionType !== \"default\" ? \"question\" : \"information\"),\r\n            img,\r\n            options,\r\n            initialValue\r\n          );\r\n          modalLayer.appendChild(optionPane.dialog);\r\n          modalLayer.style.visibility = \"inherit\";\r\n          if (initialValue) {\r\n            const index = options.indexOf(initialValue);\r\n            optionPane.dialogButtons[index].focus();\r\n          } else {\r\n            if (optionPane.dialogOkButton) {\r\n              optionPane.dialogOkButton.focus();\r\n            } else {\r\n              optionPane.dialogYesButton?.focus();\r\n            }\r\n          }\r\n        };\r\n        img.onerror = function () {\r\n          reject(new Error(`Failed to load image '${icon}'`));\r\n        };\r\n        img.src = icon;\r\n      });\r\n    } else {\r\n      return new Promise((resolve, reject) => {\r\n        let modalLayer = document.body.querySelector(\r\n          \":scope>.ModalLayer\"\r\n        ) as HTMLElement;\r\n        if (modalLayer === null) {\r\n          modalLayer = document.createElement(\"div\");\r\n          modalLayer.classList.add(\"ModalLayer\");\r\n          modalLayer.classList.add(\"CenterLayout\");\r\n          modalLayer.style.visibility = \"inherit\";\r\n          document.body.appendChild(modalLayer);\r\n        }\r\n        const optionPane = new OptionPane(\r\n          resolve,\r\n          reject,\r\n          null,\r\n          message,\r\n          title,\r\n          optionType,\r\n          messageType ||\r\n            (optionType !== \"default\" ? \"question\" : \"information\"),\r\n          undefined,\r\n          options,\r\n          initialValue\r\n        );\r\n        modalLayer.appendChild(optionPane.dialog);\r\n        modalLayer.style.visibility = \"inherit\";\r\n      });\r\n    }\r\n  };\r\n\r\n  dialog: HTMLElement;\r\n  dialogTitleBar: HTMLElement;\r\n  dialogTitleLabel: HTMLElement;\r\n  dialogContentPane: HTMLElement;\r\n  dialogMainPane: HTMLElement;\r\n  dialogIconPane: HTMLElement;\r\n  dialogMessagePane: HTMLElement;\r\n  dialogMessageLabel: HTMLElement;\r\n  dialogInputPane: HTMLElement | undefined;\r\n  dialogButtonPane: HTMLElement;\r\n  dialogOkButton: HTMLElement | undefined;\r\n  dialogCancelButton: HTMLElement | undefined;\r\n  dialogYesButton: HTMLElement | undefined;\r\n  dialogNoButton: HTMLElement | undefined;\r\n  dialogButtons: HTMLElement[];\r\n\r\n  constructor(\r\n    resolve: (input: string) => void,\r\n    reject: (error: Error) => void,\r\n    input: HTMLElement | null,\r\n    message: string,\r\n    title: string,\r\n    optionType: string,\r\n    messageType: string,\r\n    img?: HTMLImageElement,\r\n    options?: string[],\r\n    initialValue?: string\r\n  ) {\r\n    this.dialog = document.createElement(\"div\");\r\n    this.dialog.classList.add(\"Dialog\");\r\n    this.dialog.classList.add(\"BorderLayout\");\r\n\r\n    this.dialogTitleBar = OptionPane.createDialogTitleBar();\r\n    this.dialogTitleBar.classList.add(\"PageStart\");\r\n    this.dialog.appendChild(this.dialogTitleBar);\r\n\r\n    this.dialogTitleBar.classList.add(\"BorderLayout\");\r\n\r\n    this.dialogTitleLabel = OptionPane.createDialogTitleLabel(title);\r\n    this.dialogTitleLabel.style.paddingInline = \".5em\";\r\n    this.dialogTitleBar.appendChild(this.dialogTitleLabel);\r\n\r\n    this.dialogContentPane = OptionPane.createDialogContentPane();\r\n    this.dialog.appendChild(this.dialogContentPane);\r\n\r\n    this.dialogContentPane.style.padding = \".5em\";\r\n    this.dialogContentPane.classList.add(\"BorderLayout\");\r\n\r\n    this.dialogMainPane = OptionPane.createDialogMainPane();\r\n    this.dialogMainPane.style.marginBlockEnd = \".5em\";\r\n    this.dialogContentPane.appendChild(this.dialogMainPane);\r\n\r\n    this.dialogMainPane.style.display = \"grid\";\r\n    this.dialogMainPane.style.rowGap = \".5em\";\r\n\r\n    this.dialogIconPane = OptionPane.createDialogIconPane();\r\n    this.dialogIconPane.style.gridRow = \"1\";\r\n    this.dialogIconPane.style.gridColumn = \"1\";\r\n    this.dialogMainPane.appendChild(this.dialogIconPane);\r\n\r\n    this.dialogIconPane.classList.add(\"CenterLayout\");\r\n\r\n    if (img) {\r\n      this.dialogIconPane.style.marginInlineEnd = \".5em\";\r\n      this.dialogIconPane.appendChild(img);\r\n    } else {\r\n      const dialogIcon = OptionPane.createDialogIcon(messageType);\r\n      if (dialogIcon) {\r\n        this.dialogIconPane.style.marginInlineEnd = \".5em\";\r\n        this.dialogIconPane.appendChild(dialogIcon);\r\n      }\r\n    }\r\n\r\n    this.dialogMessagePane = OptionPane.createDialogMessagePane();\r\n    this.dialogMessagePane.style.gridRow = \"1\";\r\n    this.dialogMessagePane.style.gridColumn = \"2\";\r\n    this.dialogMainPane.appendChild(this.dialogMessagePane);\r\n\r\n    this.dialogMessagePane.classList.add(\"GridBagConstraints\");\r\n    this.dialogMessagePane.dataset.anchor = \"center\";\r\n    this.dialogMessagePane.dataset.fill = \"horizontal\";\r\n\r\n    this.dialogMessageLabel = OptionPane.createDialogMessageLabel(message);\r\n    this.dialogMessagePane.appendChild(this.dialogMessageLabel);\r\n\r\n    if (input) {\r\n      this.dialogInputPane = OptionPane.createDialogInputPane();\r\n      this.dialogInputPane.style.gridRow = \"2\";\r\n      this.dialogInputPane.style.gridColumn = \"2\";\r\n      this.dialogMainPane.appendChild(this.dialogInputPane);\r\n\r\n      this.dialogInputPane.classList.add(\"BorderLayout\");\r\n\r\n      this.dialogInputPane.appendChild(input);\r\n    }\r\n\r\n    this.dialogButtonPane = OptionPane.createDialogButtonPane();\r\n    this.dialogButtonPane.classList.add(\"PageEnd\");\r\n    this.dialogContentPane.appendChild(this.dialogButtonPane);\r\n\r\n    this.dialogButtonPane.classList.add(\"FlowLayout\");\r\n    this.dialogButtonPane.style.gap = \".5em\";\r\n\r\n    this.dialogButtons = [];\r\n\r\n    if (input) {\r\n      this.dialogOkButton = OptionPane.createDialogButton(\"OK\");\r\n      this.dialogButtonPane.appendChild(this.dialogOkButton);\r\n\r\n      this.dialogButtons.push(this.dialogOkButton);\r\n\r\n      this.dialogOkButton.onclick = (ev: MouseEvent) =>\r\n        this.handleInput(ev, resolve, reject, input);\r\n\r\n      if (input.tagName === \"INPUT\" && input.getAttribute(\"type\") === \"text\") {\r\n        input.onkeydown = (ev: KeyboardEvent) => {\r\n          if (ev.key === \"Enter\") {\r\n            ev.preventDefault();\r\n            this.dialogOkButton?.click();\r\n          }\r\n        };\r\n      }\r\n\r\n      this.dialogCancelButton = OptionPane.createDialogButton(\"Cancel\");\r\n      this.dialogButtonPane.appendChild(this.dialogCancelButton);\r\n\r\n      this.dialogButtons.push(this.dialogCancelButton);\r\n\r\n      this.dialogCancelButton.onclick = (ev: MouseEvent) =>\r\n        this.handleInput(ev, resolve, reject, input);\r\n    } else {\r\n      if (options) {\r\n        options.forEach((option) => {\r\n          const dialogButton = OptionPane.createDialogButton(option);\r\n          this.dialogButtonPane.appendChild(dialogButton);\r\n\r\n          this.dialogButtons.push(dialogButton);\r\n\r\n          dialogButton.onclick = (ev: MouseEvent) =>\r\n            this.handleOption(ev, resolve, reject);\r\n        });\r\n      } else {\r\n        if (optionType === \"default\" || optionType === \"ok-cancel\") {\r\n          this.dialogOkButton = OptionPane.createDialogButton(\"OK\");\r\n          this.dialogButtonPane.appendChild(this.dialogOkButton);\r\n\r\n          this.dialogButtons.push(this.dialogOkButton);\r\n\r\n          this.dialogOkButton.onclick = (ev: MouseEvent) =>\r\n            this.handleOption(ev, resolve, reject);\r\n        }\r\n        if (optionType === \"yes-no\" || optionType === \"yes-no-cancel\") {\r\n          this.dialogYesButton = OptionPane.createDialogButton(\"Yes\");\r\n          this.dialogButtonPane.appendChild(this.dialogYesButton);\r\n\r\n          this.dialogButtons.push(this.dialogYesButton);\r\n\r\n          this.dialogYesButton.onclick = (ev: MouseEvent) =>\r\n            this.handleOption(ev, resolve, reject);\r\n        }\r\n        if (optionType === \"yes-no\" || optionType === \"yes-no-cancel\") {\r\n          this.dialogNoButton = OptionPane.createDialogButton(\"No\");\r\n          this.dialogButtonPane.appendChild(this.dialogNoButton);\r\n\r\n          this.dialogButtons.push(this.dialogNoButton);\r\n\r\n          this.dialogNoButton.onclick = (ev: MouseEvent) =>\r\n            this.handleOption(ev, resolve, reject);\r\n        }\r\n        if (optionType === \"yes-no-cancel\" || optionType === \"ok-cancel\") {\r\n          this.dialogCancelButton = OptionPane.createDialogButton(\"Cancel\");\r\n          this.dialogButtonPane.appendChild(this.dialogCancelButton);\r\n\r\n          this.dialogButtons.push(this.dialogCancelButton);\r\n\r\n          this.dialogCancelButton.onclick = (ev: MouseEvent) =>\r\n            this.handleOption(ev, resolve, reject);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleInput = (\r\n    ev: MouseEvent,\r\n    resolve: (input: string) => void,\r\n    reject: (error: Error) => void,\r\n    input: HTMLElement\r\n  ) => {\r\n    const modalLayer = document.body.querySelector(\r\n      \":scope>.ModalLayer\"\r\n    ) as HTMLElement;\r\n    if (modalLayer !== null) {\r\n      modalLayer.style.visibility = \"hidden\";\r\n    }\r\n    const button = ev.currentTarget as HTMLElement;\r\n    switch (button.textContent) {\r\n      case \"OK\":\r\n        resolve((input as HTMLSelectElement | HTMLInputElement).value);\r\n        break;\r\n      default:\r\n        resolve(\"\");\r\n    }\r\n    const dialog = button.closest(\".Dialog\");\r\n    dialog?.remove();\r\n  };\r\n\r\n  handleOption = (\r\n    ev: MouseEvent,\r\n    resolve: (input: string) => void,\r\n    reject: (error: Error) => void\r\n  ) => {\r\n    const modalLayer = document.body.querySelector(\r\n      \":scope>.ModalLayer\"\r\n    ) as HTMLElement;\r\n    if (modalLayer !== null) {\r\n      modalLayer.style.visibility = \"hidden\";\r\n    }\r\n    const button = ev.currentTarget as HTMLElement;\r\n    resolve(button.textContent || \"\");\r\n    const dialog = button.closest(\".Dialog\");\r\n    dialog?.remove();\r\n  };\r\n\r\n  static createDialogTitleBar() {\r\n    const dialogTitleBar = document.createElement(\"div\");\r\n    dialogTitleBar.classList.add(\"DialogTitleBar\");\r\n    return dialogTitleBar;\r\n  }\r\n\r\n  static createDialogTitleLabel(title: string) {\r\n    const dialogTitleLabel = document.createElement(\"span\");\r\n    dialogTitleLabel.textContent = title;\r\n    return dialogTitleLabel;\r\n  }\r\n\r\n  static createDialogContentPane() {\r\n    const dialogContentPane = document.createElement(\"div\");\r\n    return dialogContentPane;\r\n  }\r\n\r\n  static createDialogMainPane() {\r\n    const dialogMainPane = document.createElement(\"div\");\r\n    return dialogMainPane;\r\n  }\r\n\r\n  static createDialogIconPane() {\r\n    const dialogIconPane = document.createElement(\"div\");\r\n    return dialogIconPane;\r\n  }\r\n\r\n  static createDialogIcon(messageType: string) {\r\n    switch (messageType) {\r\n      case \"error\":\r\n        const errorIcon = OptionPane.createErrorIcon();\r\n        errorIcon.style.fill = \"Red\";\r\n        errorIcon.style.width = \"24px\";\r\n        return errorIcon;\r\n      case \"information\":\r\n        const informationIcon = OptionPane.createInformationIcon();\r\n        informationIcon.style.fill = \"Blue\";\r\n        informationIcon.style.width = \"24px\";\r\n        return informationIcon;\r\n      case \"warning\":\r\n        const warningIcon = OptionPane.createWarningIcon();\r\n        warningIcon.style.fill = \"Gold\";\r\n        warningIcon.style.width = \"24px\";\r\n        return warningIcon;\r\n      case \"question\":\r\n        const questionIcon = OptionPane.createQuestionIcon();\r\n        questionIcon.style.fill = \"Green\";\r\n        questionIcon.style.width = \"24px\";\r\n        return questionIcon;\r\n      case \"plain\":\r\n        return;\r\n    }\r\n  }\r\n\r\n  static createDialogMessagePane() {\r\n    const dialogMessagePane = document.createElement(\"div\");\r\n    return dialogMessagePane;\r\n  }\r\n\r\n  static createDialogMessageLabel(message: string) {\r\n    const dialogMessageLabel = document.createElement(\"div\");\r\n    dialogMessageLabel.classList.add(\"CenterLayout\");\r\n    dialogMessageLabel.textContent = message;\r\n    return dialogMessageLabel;\r\n  }\r\n\r\n  static createDialogInputPane() {\r\n    const dialogInputPane = document.createElement(\"div\");\r\n    return dialogInputPane;\r\n  }\r\n\r\n  static createDialogButtonPane() {\r\n    const dialogButtonPane = document.createElement(\"div\");\r\n    return dialogButtonPane;\r\n  }\r\n\r\n  static createDialogButton(text: string) {\r\n    const dialogButton = document.createElement(\"button\");\r\n    dialogButton.textContent = text;\r\n    return dialogButton;\r\n  }\r\n\r\n  /*\r\n   * Icons designed by Google.\r\n   * Icons sourced from Material-UI (mui.com) Material Icons collection.\r\n   * You can find the original icons and more at: https://mui.com/material-ui/material-icons/\r\n   */\r\n\r\n  static createErrorIcon() {\r\n    const errorIcon = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"svg\"\r\n    );\r\n    errorIcon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n    path.setAttribute(\r\n      \"d\",\r\n      \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"\r\n    );\r\n    errorIcon.appendChild(path);\r\n    return errorIcon;\r\n  }\r\n\r\n  static createInformationIcon() {\r\n    const informationIcon = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"svg\"\r\n    );\r\n    informationIcon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n    path.setAttribute(\r\n      \"d\",\r\n      \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\"\r\n    );\r\n    informationIcon.appendChild(path);\r\n    return informationIcon;\r\n  }\r\n\r\n  static createWarningIcon() {\r\n    const warningIcon = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"svg\"\r\n    );\r\n    warningIcon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n    path.setAttribute(\r\n      \"d\",\r\n      \"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"\r\n    );\r\n    warningIcon.appendChild(path);\r\n    return warningIcon;\r\n  }\r\n\r\n  static createQuestionIcon() {\r\n    const questionIcon = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"svg\"\r\n    );\r\n    questionIcon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n    path.setAttribute(\r\n      \"d\",\r\n      \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"\r\n    );\r\n    questionIcon.appendChild(path);\r\n    return questionIcon;\r\n  }\r\n}\r\n\r\n/**\r\n * SplitPane\r\n *\r\n * Based on the javax.swing.JSplitPane\r\n * https://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html\r\n * https://docs.oracle.com/javase/8/docs/api/javax/swing/JSplitPane.html\r\n *\r\n * @author Yassuo Toda\r\n */\r\n\r\nexport class SplitPane {\r\n  static dragStart: boolean = false;\r\n  static dragLayer: HTMLElement;\r\n\r\n  static splitPaneDivider: HTMLElement;\r\n  static splitPane: HTMLElement;\r\n  static leftComponent: HTMLElement;\r\n  static rightComponent: HTMLElement;\r\n  static verticalSplit: boolean = false;\r\n  static offset: number;\r\n  static maximumDividerLocation: number;\r\n\r\n  static pointerdown = (ev: PointerEvent) => {\r\n    const target = ev.target as HTMLElement;\r\n    if (!target.classList.contains(\"SplitPaneDivider\")) {\r\n      return;\r\n    }\r\n    SplitPane.dragStart = true;\r\n    SplitPane.splitPaneDivider = target;\r\n    SplitPane.splitPane = SplitPane.splitPaneDivider.closest(\r\n      \".SplitPane\"\r\n    ) as HTMLElement;\r\n    SplitPane.leftComponent = SplitPane.splitPane.children[0] as HTMLElement;\r\n    SplitPane.rightComponent = SplitPane.splitPane.children[2] as HTMLElement;\r\n    const leftComponentRect: DOMRect =\r\n      SplitPane.leftComponent.getBoundingClientRect();\r\n    const rightComponentRect: DOMRect =\r\n      SplitPane.rightComponent.getBoundingClientRect();\r\n    SplitPane.verticalSplit =\r\n      SplitPane.splitPane.dataset.orientation === \"vertical-split\";\r\n    if (SplitPane.verticalSplit) {\r\n      SplitPane.maximumDividerLocation =\r\n        leftComponentRect.height + rightComponentRect.height;\r\n      const percentage =\r\n        (100 * leftComponentRect.height) / SplitPane.maximumDividerLocation;\r\n      SplitPane.leftComponent.style.height = percentage + \"%\";\r\n      SplitPane.rightComponent.style.height = 100 - percentage + \"%\";\r\n      SplitPane.offset = ev.clientY - leftComponentRect.height;\r\n    } else {\r\n      SplitPane.maximumDividerLocation =\r\n        leftComponentRect.width + rightComponentRect.width;\r\n      const percentage =\r\n        (100 * leftComponentRect.width) / SplitPane.maximumDividerLocation;\r\n      SplitPane.leftComponent.style.width = percentage + \"%\";\r\n      SplitPane.rightComponent.style.width = 100 - percentage + \"%\";\r\n      SplitPane.offset = ev.clientX - leftComponentRect.width;\r\n    }\r\n    if (SplitPane.verticalSplit) {\r\n      document.body.style.cursor = \"ns-resize\";\r\n    } else {\r\n      document.body.style.cursor = \"ew-resize\";\r\n    }\r\n    document.addEventListener(\"touchmove\", SplitPane.preventTouchMove, {\r\n      passive: false,\r\n    });\r\n    document.addEventListener(\"pointermove\", SplitPane.pointermove);\r\n    document.addEventListener(\"pointerup\", SplitPane.pointerup);\r\n    // document.addEventListener(\"dragstart\", SplitPane.dragstart);\r\n    SplitPane.dragLayer = document.body.querySelector(\r\n      \":scope>.DragLayer\"\r\n    ) as HTMLElement;\r\n    if (SplitPane.dragLayer === null) {\r\n      SplitPane.dragLayer = document.createElement(\"div\");\r\n      SplitPane.dragLayer.classList.add(\"DragLayer\");\r\n      document.body.appendChild(SplitPane.dragLayer);\r\n    }\r\n    SplitPane.dragLayer.style.visibility = \"\";\r\n    ev.preventDefault();\r\n  };\r\n\r\n  static preventTouchMove(ev: TouchEvent) {\r\n    ev.preventDefault();\r\n  }\r\n\r\n  static pointermove = (ev: PointerEvent) => {\r\n    if (!SplitPane.dragStart) {\r\n      return;\r\n    }\r\n    if (SplitPane.verticalSplit) {\r\n      const dividerLocation = Math.min(\r\n        Math.max(ev.clientY - SplitPane.offset, 0),\r\n        SplitPane.maximumDividerLocation\r\n      );\r\n      const percentage =\r\n        (100 * dividerLocation) / SplitPane.maximumDividerLocation;\r\n      SplitPane.leftComponent.style.height = percentage + \"%\";\r\n      SplitPane.rightComponent.style.height = 100 - percentage + \"%\";\r\n    } else {\r\n      const dividerLocation = Math.min(\r\n        Math.max(ev.clientX - SplitPane.offset, 0),\r\n        SplitPane.maximumDividerLocation\r\n      );\r\n      const percentage =\r\n        (100 * dividerLocation) / SplitPane.maximumDividerLocation;\r\n      SplitPane.leftComponent.style.width = percentage + \"%\";\r\n      SplitPane.rightComponent.style.width = 100 - percentage + \"%\";\r\n    }\r\n    ev.preventDefault();\r\n  };\r\n\r\n  static pointerup = (ev: PointerEvent) => {\r\n    SplitPane.dragStart = false;\r\n    document.body.style.cursor = \"\";\r\n    document.removeEventListener(\"touchmove\", SplitPane.preventTouchMove);\r\n    document.removeEventListener(\"pointermove\", SplitPane.pointermove);\r\n    document.removeEventListener(\"pointerup\", SplitPane.pointerup);\r\n    // document.removeEventListener(\"dragstart\", SplitPane.dragstart);\r\n    if (SplitPane.dragLayer !== null) {\r\n      SplitPane.dragLayer.style.visibility = \"hidden\";\r\n    }\r\n  };\r\n\r\n  /*\r\n    static dragstart = (ev: PointerEvent) => {\r\n      if (ev.target === SplitPane.splitPaneDivider) {\r\n        SplitPane.pointerup(ev);\r\n        ev.preventDefault();\r\n      }\r\n    };\r\n    */\r\n}\r\n\r\n/**\r\n * TabbedPane\r\n *\r\n * Based on the javax.swing.JTabbedPane and java.awt.CardLayout\r\n * https://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html\r\n * https://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html\r\n * https://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\r\n * https://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html\r\n *\r\n * @author Yassuo Toda\r\n */\r\n\r\n/**\r\n * TabContainer\r\n *\r\n * @author Yassuo Toda\r\n */\r\nexport class TabContainer {\r\n  static setSelectedTabComponent = (\r\n    tabContainer: HTMLElement,\r\n    cardContainer: HTMLElement,\r\n    selectedTabComponent: HTMLElement\r\n  ) => {\r\n    let selectedCardComponent: HTMLElement | null = null;\r\n    for (let i: number = 0; i < tabContainer.children.length; i++) {\r\n      const tabComponent = tabContainer.children[i] as HTMLElement;\r\n      if (tabComponent === selectedTabComponent) {\r\n        const value = tabComponent.getAttribute(\"value\");\r\n        selectedCardComponent = CardContainer.show(cardContainer, value || \"\");\r\n      }\r\n    }\r\n    if (selectedCardComponent) {\r\n      for (let i: number = 0; i < tabContainer.children.length; i++) {\r\n        const tabComponent = tabContainer.children[i] as HTMLElement;\r\n        if (tabComponent === selectedTabComponent) {\r\n          tabComponent.tabIndex = -1;\r\n        } else {\r\n          tabComponent.tabIndex = 0;\r\n        }\r\n      }\r\n    }\r\n    return selectedCardComponent;\r\n  };\r\n}\r\n\r\n/**\r\n * CardContainer\r\n *\r\n * @author Yassuo Toda\r\n */\r\nexport class CardContainer {\r\n  static show = (cardContainer: HTMLElement, name: string) => {\r\n    for (let i: number = 0; i < cardContainer.children.length; i++) {\r\n      const cardComponent: HTMLElement = cardContainer.children[\r\n        i\r\n      ] as HTMLElement;\r\n      if (cardComponent.dataset.name === name) {\r\n        return CardContainer.setSelectedIndex(cardContainer, i);\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  static setSelectedIndex = (\r\n    cardContainer: HTMLElement,\r\n    selectedIndex: number\r\n  ) => {\r\n    let selectedCardComponent: HTMLElement | null = null;\r\n    for (let i: number = 0; i < cardContainer.children.length; i++) {\r\n      const cardComponent: HTMLElement = cardContainer.children[\r\n        i\r\n      ] as HTMLElement;\r\n      if (i === selectedIndex) {\r\n        cardComponent.style.visibility = \"\";\r\n        cardComponent.focus();\r\n        selectedCardComponent = cardComponent;\r\n      } else {\r\n        cardComponent.style.visibility = \"hidden\";\r\n      }\r\n    }\r\n    return selectedCardComponent;\r\n  };\r\n}\r\n\r\n/**\r\n * TabComponent\r\n *\r\n * @author Yassuo Toda\r\n */\r\nexport class TabComponent {\r\n  static pointerdown = (ev: PointerEvent) => {\r\n    const tabComponent = ev.target as HTMLElement;\r\n    const tabContainer = tabComponent.parentElement;\r\n    if (!tabContainer) {\r\n      return;\r\n    }\r\n    const tabbedPane = tabContainer.parentElement;\r\n    if (!tabbedPane) {\r\n      return;\r\n    }\r\n    if (!tabbedPane.classList.contains(\"TabbedPane\")) {\r\n      return;\r\n    }\r\n    const cardContainer: HTMLElement = tabbedPane.children[\r\n      tabbedPane.childElementCount - 1\r\n    ] as HTMLElement;\r\n    if (cardContainer === null) {\r\n      return;\r\n    }\r\n    if (cardContainer === tabContainer) {\r\n      return;\r\n    }\r\n    TabContainer.setSelectedTabComponent(\r\n      tabContainer,\r\n      cardContainer,\r\n      tabComponent\r\n    );\r\n  };\r\n}\r\n","import { Dialog, MenuBar, SplitPane, TabComponent } from \"./simpa\";\r\n\r\nif ((window as any)[\"Dialog\"]) {\r\n  document.removeEventListener(\r\n    \"pointerdown\",\r\n    (window as any)[\"Dialog\"].pointerdown\r\n  );\r\n}\r\n\r\ndocument.addEventListener(\"pointerdown\", Dialog.pointerdown);\r\n\r\nif ((window as any)[\"MenuBar\"]) {\r\n  document.removeEventListener(\r\n    \"pointerdown\",\r\n    (window as any)[\"MenuBar\"].pointerdown\r\n  );\r\n}\r\n\r\ndocument.addEventListener(\"pointerdown\", MenuBar.pointerdown);\r\n\r\nif ((window as any)[\"SplitPane\"]) {\r\n  document.removeEventListener(\r\n    \"pointerdown\",\r\n    (window as any)[\"SplitPane\"].pointerdown\r\n  );\r\n}\r\n\r\ndocument.addEventListener(\"pointerdown\", SplitPane.pointerdown);\r\n\r\nif ((window as any)[\"TabComponent\"]) {\r\n  document.removeEventListener(\r\n    \"pointerdown\",\r\n    (window as any)[\"TabComponent\"].pointerdown\r\n  );\r\n}\r\n\r\ndocument.addEventListener(\"pointerdown\", TabComponent.pointerdown);\r\n"],"names":["root","factory","exports","module","define","amd","this","Symbol","toStringTag","Object","defineProperty","value","preventTouchMove","ev","preventDefault","dragStart","pointerdown","dialogTitleBar","target","classList","contains","closest","Dialog","dialog","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","width","height","style","position","document","addEventListener","passive","pointermove","pointerup","pointerenter","Math","min","max","window","innerHeight","innerWidth","removeEventListener","getSelected","menuBar","i","children","length","li","undefined","dataset","selected","open","close","closed","removeAttribute","MenuBar","select","ul","clearTimeout","querySelectorAll","forEach","setTimeout","child","timeoutId","handler","timeout","currentTarget","onpointerdown","onpointerup","pointerType","onmouseover","mouseover","onmouseleave","mouseleave","parentElement","stopPropagation","input","querySelector","type","checked","resolve","reject","message","title","optionType","messageType","img","options","initialValue","handleInput","modalLayer","body","visibility","button","textContent","remove","handleOption","createElement","add","OptionPane","createDialogTitleBar","appendChild","dialogTitleLabel","createDialogTitleLabel","paddingInline","dialogContentPane","createDialogContentPane","padding","dialogMainPane","createDialogMainPane","marginBlockEnd","display","rowGap","dialogIconPane","createDialogIconPane","gridRow","gridColumn","marginInlineEnd","dialogIcon","createDialogIcon","dialogMessagePane","createDialogMessagePane","anchor","fill","dialogMessageLabel","createDialogMessageLabel","dialogInputPane","createDialogInputPane","dialogButtonPane","createDialogButtonPane","gap","dialogButtons","dialogOkButton","createDialogButton","push","onclick","tagName","getAttribute","onkeydown","key","click","dialogCancelButton","option","dialogButton","dialogYesButton","dialogNoButton","errorIcon","createErrorIcon","informationIcon","createInformationIcon","warningIcon","createWarningIcon","questionIcon","createQuestionIcon","text","createElementNS","setAttribute","path","showMessageDialog","icon","Promise","alt","onload","naturalWidth","naturalHeight","optionPane","focus","onerror","Error","src","showConfirmDialog","showInputDialog","selectionValues","initialSelectionValue","selectionValue","textField","showOptionDialog","index","indexOf","verticalSplit","SplitPane","splitPaneDivider","splitPane","leftComponent","rightComponent","leftComponentRect","rightComponentRect","orientation","maximumDividerLocation","percentage","offset","cursor","dragLayer","setSelectedTabComponent","tabContainer","cardContainer","selectedTabComponent","selectedCardComponent","tabComponent","CardContainer","show","tabIndex","name","setSelectedIndex","selectedIndex","cardComponent","tabbedPane","childElementCount","TabContainer","TabComponent"],"sourceRoot":""}